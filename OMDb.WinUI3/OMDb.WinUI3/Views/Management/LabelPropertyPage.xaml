<Page
    x:Class="OMDb.WinUI3.Views.LabelPropertyPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Core="using:Microsoft.Xaml.Interactions.Core"
    xmlns:DbModels="using:OMDb.Core.DbModels"
    xmlns:Interactivity="using:Microsoft.Xaml.Interactivity"
    xmlns:controls="using:CommunityToolkit.WinUI.UI.Controls"
    xmlns:coverters="using:OMDb.WinUI3.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:OMDb.WinUI3.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="using:OMDb.WinUI3.Models"
    xmlns:viewmodels="using:OMDb.WinUI3.ViewModels"
    NavigationCacheMode="Enabled"
    mc:Ignorable="d">
    <Page.Resources>
        <DataTemplate x:Key="CategoryTemplate" x:DataType="models:LabelTree">
            <StackPanel>
                <TextBlock Text="{x:Bind Label.Name}" Padding="8" Style="{StaticResource TitleTextBlockStyle}"/>
                <ItemsRepeater x:Name="innerRepeater"
                            ItemsSource="{x:Bind Children}"
                            ItemTemplate="{StaticResource StringDataTemplateColor}">
                    <ItemsRepeater.Layout>
                        <StackLayout Orientation="Horizontal" />
                    </ItemsRepeater.Layout>
                </ItemsRepeater>
            </StackPanel>
        </DataTemplate>

        <DataTemplate x:Key="StringDataTemplateColor" x:DataType="models:LabelTree">
            <Grid Background="{StaticResource SystemControlBackgroundAccentBrush}" Margin="10, 0, 10 10">
                <TextBlock Padding="10" Text="{x:Bind Label.Name}"
                   Foreground="{StaticResource SystemControlForegroundAltHighBrush}"
                   HorizontalAlignment="Center" TextWrapping="Wrap" VerticalAlignment="Center"/>
            </Grid>
        </DataTemplate>

    </Page.Resources>

        <!-- The nested ItemsRepeater experience is achieved by creating one ItemsRepeater (outerRepeater below)
and creating another ItemsRepeater (innerRepeater below) inside the outer one's DataTemplate. Below is
the outer ItemsRepeater definition and the DataTemplate it uses. -->

    <controls:DockPanel Name="SampleDockPanel" Margin="2" Background="LightGray" LastChildFill="False">

        <StackPanel Width="200" controls:DockPanel.Dock="Left" Background="Red">
            <ListView ItemsSource="{x:Bind VM.LabelTrees}">
                <ListView.ItemTemplate >
                    <DataTemplate x:DataType="models:LabelTree">
                        <ListBoxItem>
                            <Button Content="{x:Bind Label.Name}"></Button>
                        </ListBoxItem>
                    </DataTemplate>
                </ListView.ItemTemplate>
                    
            </ListView>
        </StackPanel>
        <StackPanel Height="300" controls:DockPanel.Dock="Bottom" Background="Green" Visibility="Collapsed"></StackPanel>
        
    </controls:DockPanel>




        <!-- The DataTemplate shown above is bound to a custom-class type called NestedCategory,
which is defined in the code-behind. NestedCategory objects have the following two attributes:
a CategoryName (string), and a collection of strings called CategoryItems. -->

        <!-- The inner ItemsRepeater is bound to its own, separate DataTemplate called StringDataTemplateColor: -->




</Page>
